import{_ as y,D as x,L as B,k as P,B as k,G as V,r as _,o as i,c as r,d as D,l as p,g as a,e,F as v,h as u,t as l,w as b,i as G,n as C,f as L}from"./index.2e5144e1.js";const T="Click on an environment on the left to see its details",A="Are you sure you want to delete this environment?",I={show:!0,text:"Delete",positive:!1},N={show:!0,text:"Cancel",positive:!0},O={components:{Dialog:x,LoadingSpinner:B},data(){return{tips:T,selectedEnvironment:null,dockerEnvironments:[],kubernetesEnvironments:[],showDialog:!1,dialogText:A,dialogConfirmButton:I,dialogCancelButton:N,isDeleting:!1,showErrorDialog:!1,errorDialogConfirmButton:{show:!0,text:"OK",positive:!0},id:null}},methods:{selectEnvironment(c){if(this.selectedEnvironment===c){this.selectedEnvironment=null;return}this.selectedEnvironment=c,this.$refs.rightContainer.scrollTop=0,this.id=c.id},confirmDelete(){this.showDialog=!1;let c=this.selectedEnvironment.environmentSetup.name,n=this.selectedEnvironment.environmentSetup.version,m=this.selectedEnvironment.platform,d=this.selectedEnvironment.environmentSetup.context;this.isDeleting=!0,P(m,c,n,d).then(()=>{this.selectedEnvironment.platform==="docker"?this.dockerEnvironments=this.dockerEnvironments.filter(t=>t!==this.selectedEnvironment):this.selectedEnvironment.platform==="kubernetes"&&(this.kubernetesEnvironments=this.kubernetesEnvironments.filter(t=>t!==this.selectedEnvironment)),this.selectedEnvironment=null,this.isDeleting=!1}).catch(t=>{this.errorDialogText="Error deleting the environment: "+t,this.showErrorDialog=!0,this.isDeleting=!1})},cancelDelete(){this.showDialog=!1},edit(){this.$store.commit("editEnvironmentInit",this.selectedEnvironment),this.$router.push("/variables")},openDataPortal(){k(this.selectedEnvironment.accessPoints.dataPortal)},openApiGateway(){k(this.selectedEnvironment.accessPoints.apiGateway)},closeErrorDialog(){this.showErrorDialog=!1}},created(){V().then(c=>{if(!!c&&(c.forEach(n=>{n.id=n.environmentSetup.name+"-"+n.environmentSetup.version+"-"+n.platform,n.platform==="docker"?this.dockerEnvironments.push(n):n.platform==="kubernetes"&&this.kubernetesEnvironments.push(n)}),this.$route.params.id)){let n=this.$route.params.id.split("-")[0],m=this.$route.params.id.split("-")[1],d=this.$route.params.id.split("-")[2],t=this.dockerEnvironments.find(o=>o.environmentSetup.name===n&&o.environmentSetup.version===m&&o.platform===d);t||(t=this.kubernetesEnvironments.find(o=>o.environmentSetup.name===n&&o.environmentSetup.version===m&&o.platform===d)),t&&this.selectEnvironment(t)}})}},F={class:"environments-container-container"},K={class:"environments-container"},z={class:"environments-left-container"},H=e("img",{src:G,alt:"EPOS Data Portal",class:"home-logo"},null,-1),R={class:"environments-list"},U=e("div",{class:"environments-list-title"},"Docker Environments",-1),j={class:"environments-list-container"},q=["onClick"],J={class:"environment-item"},M={class:"environment-value"},Q={class:"environment-value"},W={class:"environments-list"},X=e("div",{class:"environments-list-title"},"Kubernetes Environments",-1),Y={class:"environments-list-container"},Z=["onClick"],$={class:"environment-item"},ee={class:"environment-value"},te={class:"environment-value"},ne={class:"environments-right-container",ref:"rightContainer"},se={class:"environments-right-container-main-content"},oe={key:0,class:"environments-info"},ie=e("div",{class:"environments-title"},"Installed Environments",-1),le={class:"environments-tips"},re={key:1,class:"environments-details"},ce={class:"environments-details-title"},ae=e("span",{class:"environments-title-space"},"V.",-1),me={class:"environments-details-table"},de=e("td",null,"Name:",-1),ve=e("td",null,"Version:",-1),ue=e("td",null,"Platform:",-1),he={key:0},_e=e("td",null,"Context:",-1),pe=e("div",{class:"environments-details-title"},"Access Points",-1),Ee={class:"environments-details-table"},fe=e("td",null,"Data Portal:",-1),ge=e("td",null,"API Gateway:",-1),ke={key:2,class:"environments-details"},De=e("div",{class:"environments-details-title"},"Environmental Variables",-1),be={class:"variables-section-title"},Ce={class:"environments-details-table"},Se={class:"variables-label"},we={class:"variables-value"},ye={class:"navigation-container"},xe=e("button",{class:"primary-button"},"Home",-1);function Be(c,n,m,d,t,o){const S=_("LoadingSpinner"),E=_("Dialog"),f=_("router-link");return i(),r(v,null,[D(S,{isLoading:t.isDeleting,text:"Deleting environment..."},null,8,["isLoading","text"]),t.showDialog?(i(),p(E,{key:0,onConfirm:o.confirmDelete,onCancel:o.cancelDelete,text:t.dialogText,confirmButton:t.dialogConfirmButton,cancelButton:t.dialogCancelButton,title:"Delete environment"},null,8,["onConfirm","onCancel","text","confirmButton","cancelButton"])):a("",!0),t.showErrorDialog?(i(),p(E,{key:1,onConfirm:o.closeErrorDialog,text:c.errorDialogText,title:"Error deleting environment",confirmButton:t.errorDialogConfirmButton,cancelButton:null},null,8,["onConfirm","text","confirmButton"])):a("",!0),e("div",F,[e("div",K,[e("div",z,[H,e("div",R,[U,e("div",j,[(i(!0),r(v,null,u(t.dockerEnvironments,s=>(i(),r("div",{key:s.environmentSetup.name,class:C(["environment-item-container",{"selected-environment-item-container":s===t.selectedEnvironment}]),onClick:h=>o.selectEnvironment(s)},[e("div",J,[e("div",M,l(s.environmentSetup.name),1),e("div",Q,l("V. "+s.environmentSetup.version),1)])],10,q))),128))])]),e("div",W,[X,e("div",Y,[(i(!0),r(v,null,u(t.kubernetesEnvironments,s=>(i(),r("div",{key:s.environmentSetup.name,class:C(["environment-item-container",{"selected-environment-item-container":s===t.selectedEnvironment}]),onClick:h=>o.selectEnvironment(s)},[e("div",$,[e("div",ee,l(s.environmentSetup.name),1),e("div",te,l("V. "+s.environmentSetup.version),1)])],10,Z))),128))])])]),e("div",ne,[e("div",se,[t.selectedEnvironment?a("",!0):(i(),r("div",oe,[ie,e("div",le,l(t.tips),1)])),t.selectedEnvironment?(i(),r("div",re,[e("div",ce,[e("span",null,l(t.selectedEnvironment.environmentSetup.name),1),ae,e("span",null,l(t.selectedEnvironment.environmentSetup.version),1)]),e("table",me,[e("tr",null,[de,e("td",null,l(t.selectedEnvironment.environmentSetup.name),1)]),e("tr",null,[ve,e("td",null,l(t.selectedEnvironment.environmentSetup.version),1)]),e("tr",null,[ue,e("td",null,l(t.selectedEnvironment.platform),1)]),t.selectedEnvironment.platform=="kubernetes"?(i(),r("tr",he,[_e,e("td",null,l(t.selectedEnvironment.environmentSetup.context),1)])):a("",!0)]),pe,e("table",Ee,[e("tr",null,[fe,e("td",null,l(t.selectedEnvironment.accessPoints.dataPortal),1),e("button",{class:"environments-access-points-button",onClick:n[0]||(n[0]=(...s)=>o.openDataPortal&&o.openDataPortal(...s))},"Open in the browser")]),e("tr",null,[ge,e("td",null,l(t.selectedEnvironment.accessPoints.apiGateway),1),e("button",{class:"environments-access-points-button",onClick:n[1]||(n[1]=(...s)=>o.openApiGateway&&o.openApiGateway(...s))},"Open in the browser")])]),t.selectedEnvironment?(i(),p(f,{key:0,class:"environments-populate-button",to:"/populate/"+t.id},{default:b(()=>[L("Populate Environment")]),_:1},8,["to"])):a("",!0)])):a("",!0),t.selectedEnvironment?(i(),r("div",ke,[De,(i(!0),r(v,null,u(t.selectedEnvironment.variables,(s,h)=>(i(),r("div",{key:h},[e("h2",be,l(s.name),1),e("table",Ce,[(i(!0),r(v,null,u(s.variables,(w,g)=>(i(),r("tr",{key:g},[e("td",Se,l(g),1),e("td",we,l(w),1)]))),128))])]))),128))])):a("",!0)]),e("div",ye,[D(f,{to:"/"},{default:b(()=>[xe]),_:1}),t.selectedEnvironment?(i(),r("button",{key:0,class:"secondary-button",onClick:n[2]||(n[2]=s=>t.showDialog=!0)},"Delete environment")):a("",!0),t.selectedEnvironment?(i(),r("button",{key:1,class:"primary-button",onClick:n[3]||(n[3]=(...s)=>o.edit&&o.edit(...s))},"Edit")):a("",!0)])],512)])])],64)}const Ve=y(O,[["render",Be]]);export{Ve as default};
