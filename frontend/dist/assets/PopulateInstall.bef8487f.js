import{I as o}from"./InstallationStep.916efcd3.js";import{_ as r,E as p,P as d,r as c,o as h,c as u,d as m,w as f,e as a}from"./index.2e5144e1.js";import{x as v,a as _}from"./xterm.9c673174.js";const g=[{title:"SpecifyPath",active:!1},{title:"Populate",active:!0}],x="",b={components:{InstallationStep:o},data(){return{terminal:null,installing:!1,steps:g,tips:x,navigation:{next:{path:`/environments/${this.$store.state.populateState.id}`,disabled:!1,text:"Populate",onClick:()=>{this.install()}},back:{path:"/populate/"+this.$store.state.populateState.id,disabled:!1},cancel:{path:"/environments/"+this.$store.state.populateState.id,disabled:!1}}}},methods:{updateTerminal(t){this.terminal.write(t+`\r
`)},install(){this.installing=!0,this.navigation.next.disabled=!0,this.navigation.cancel.disabled=!0,this.navigation.back.disabled=!0,this.updateTerminal(`
Populating the environment\r
`),this.updateTerminal(`Populating...\r
`),this.populate()},populate(){let t=this.$store.state.populateState.name,n=this.$store.state.populateState.version,i=this.$store.state.populateState.platform,s=this.$store.state.populateState.path;p("TERMINAL_OUTPUT",e=>{this.updateTerminal(e)}),d(t,n,s,i).then(()=>{this.finishInstallation()}).catch(e=>{this.updateTerminal(`
Population failed:\r
`),this.updateTerminal("Error: "+e+`\r
`),this.installationError()})},finishInstallation(){this.installing=!1,this.navigation.next.disabled=!1,this.updateTerminal(`
Population finished successfully!`),this.navigation.next.onClick=null,this.navigation.next.text="Back to Installed Environments"},installationError(){this.installing=!1,this.navigation.cancel.disabled=!1,this.navigation.back.disabled=!1,this.navigation.next.disabled=!1,this.navigation.next.text="Retry"}},mounted(){this.terminal=new v.exports.Terminal({fontSize:13,theme:{background:"#111111"},rows:25,fontFamily:"monospace",cursorInactiveStyle:"none"});const t=new _.exports.FitAddon;this.terminal.loadAddon(t),this.terminal.open(this.$refs.terminal),t.fit(),window.addEventListener("resize",()=>{t.fit()}),this.updateTerminal(`Press 'Populate' to start the population process.\r
`)}},P={class:"install-container"},S={class:"install-main-content-container"},T=a("h1",{class:"install-title"},"Populate",-1),E={class:"install-main-content"},I={class:"terminal-output",ref:"terminal"};function $(t,n,i,s,e,k){const l=c("InstallationStep");return h(),u("div",P,[m(l,{navigation:e.navigation,steps:e.steps,tips:e.tips},{default:f(()=>[a("div",S,[T,a("div",E,[a("div",I,null,512)])])]),_:1},8,["navigation","steps","tips"])])}const B=r(b,[["render",$]]);export{B as default};
